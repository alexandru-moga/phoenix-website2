<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Phoenix Club â€“ Our Team</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <section class="page-header">
    <h1>Our Team</h1>
    <p>Meet the amazing people behind Phoenix</p>
  </section>

  <div class="container">
    <div class="member-grid" id="teamContainer">
      <!-- Dynamic content will be injected here -->
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', async () => {
      const container = document.getElementById('teamContainer');
      try {
        const response = await fetch('/api/team-members');
        const members = await response.json();

        if (!Array.isArray(members) || members.length === 0) {
          container.innerHTML = '<p>No team members found.</p>';
          return;
        }

        // Group by role
        const leaders = members.filter(m => m.role && m.role.toLowerCase().includes('leader'));
        const others = members.filter(m => !m.role || !m.role.toLowerCase().includes('leader'));

        let html = '';

        if (leaders.length) {
          html += `<h2>Leadership</h2><div class="member-grid">`;
          html += leaders.map(m => `
            <div class="member-card">
              <img src="${m.img}" alt="${m.first_name} ${m.last_name}">
              <h3>${m.first_name} ${m.last_name}</h3>
              <div class="member-role">${m.role || ''}</div>
              <div class="member-description">${m.description || ''}</div>
            </div>
          `).join('');
          html += `</div>`;
        }

        if (others.length) {
          html += `<h2>Members</h2><div class="member-grid">`;
          html += others.map(m => `
            <div class="member-card">
              <img src="${m.img}" alt="${m.first_name} ${m.last_name}">
              <h3>${m.first_name} ${m.last_name}</h3>
              <div class="member-role">${m.role || ''}</div>
              <div class="member-description">${m.description || ''}</div>
            </div>
          `).join('');
          html += `</div>`;
        }

        container.innerHTML = html;
      } catch (err) {
        container.innerHTML = '<p class="error">Failed to load team members. Please try again later.</p>';
        console.error(err);
      }
    });
  </script>
</body>
</html>